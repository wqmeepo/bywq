{% extends "common/common_sidebar.html" %}
{% block content_sidebar %}
    <head>
        <link href="{{ url_for('static',filename='home/css/common.css') }}" rel="stylesheet">
        <head>
            <style>
                .table > tbody > tr > td {
                    /*border: 0px;*/
                    vertical-align: middle;
                }
            </style>
        </head>
    </head>
    <body>

    <div class="container-fluid">
        <p class="alert-success">
            {% for msg in get_flashed_messages(category_filter=["dfupload_success"]) %}

                {{ msg }}

            {% endfor %}
        </p>
        <p class="lead container col-3">数据库文件管理</p>
        <div class="text-right mb-4">
            <button class="btn btn-primary"><a class="text-white"
                                               href="{{ url_for('bs.dfUpload') }}">数据库源文件上传</a></button>
        </div>

        <!-- 表格展示 -->
        <table class="table table-hover">
            <thead class="thead-light">
            <tr>
                <th scope="col">系统</th>
                <th scope="col">数据库文件下载</th>
                <th scope="col">数据库搜索</th>
            </tr>
            </thead>
            <tbody>

            {% set list_sys =[] %}
            {% set list_path = [] %}

            {% for i in g.df %}
                {{ list_sys.append(i.sys_no) or '' }}
                {{ list_path.append(i.file_path) or '' }}
            {% endfor %}

            {% for i in g.bs %}
                {% for j in g.df %}
                    {% if i.sys_no == j[0] %}
                        <tr>
                            <td>{{ i.sys_name }}</td>
                            <td><a class="btn btn-outline-primary btn-sm"
                                   href="{{ url_for('bs.dfDownload', file_path=j[1]) }}">点击下载</a></td>
                            <td><a class="btn btn-outline-success btn-sm" href="{{ url_for('bs.dfSearch') }}">数据库搜索</a>
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endfor %}
            </tbody>
        </table>
    </div>

    </body>

{% endblock %}
{% extends "common/common_sidebar.html" %}
{% block content_sidebar %}

    <div class="container-fluid mt-3">

        <p class="alert-success">
            {% for msg in get_flashed_messages(category_filter=["announceSet_success"]) %}

                {{ msg }}

            {% endfor %}
            {% for msg in get_flashed_messages(category_filter=["anodelete_success"]) %}

                {{ msg }}

            {% endfor %}
            {% for msg in get_flashed_messages(category_filter=["anodelete_failed"]) %}

                {{ msg }}

            {% endfor %}
        </p>

        <p class="lead container col-3">公告管理</p>
        <div class="text-right mb-4">
            <button class="btn btn-primary"><a class="text-white" href="{{ url_for('jymng.announceSet') }}">新建公告</a>
            </button>
            <button class="btn btn-primary"><a class="text-white"
                                               href="{{ url_for('jymng.announceTypeSet') }}">新建公告类型</a>
            </button>
        </div>
        {% set list1 = [] %}
        {% set list2 = [] %}
        {% set list3 = [] %}
        {% for item in g.ano %}
            {% if item.to_who == '1' %}
                {{ list1.append(item) or '' }}
            {% elif item.to_who == '2' %}
                {{ list2.append(item) or '' }}
            {% else %}
                {{ list3.append(item) or '' }}
            {% endif %}
        {% endfor %}
        {% if list1|length > 0 %}
            <p>对内公告</p>
            <table class="table table-striped table-hover table-bordered">
                <thead>
                <tr>
                    <th scope="col">公告类型</th>
                    <th scope="col">公告名称</th>
                    <th scope="col">公告发表人</th>
                    <th scope="col">公告发表时间</th>
                    <th scope="col">编辑</th>
                    <th scope="col">删除</th>
                </tr>
                </thead>
                <tbody>
                {% for item in list1 %}
                    <tr>
                        <td>{{ item.announce_type }}</td>
                        <td>{{ item.announce_head }}</td>
                        <td>{{ item.publisher }}</td>
                        <td>{{ item.upload_time }}</td>
                        <td><a href="{{ url_for('jymng.announceEdit', sys_id=item.id) }}">编辑</a></td>
                        <td><a href="{{ url_for('jymng.announceDelete', sys_id=item.id) }}">删除</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}
        {% if list2|length > 0 %}
            <hr>
            <p>对外公告</p>
            <table class="table table-striped table-hover table-bordered">
                <thead>
                <tr>
                    <th scope="col">公告类型</th>
                    <th scope="col">公告名称</th>
                    <th scope="col">公告发表人</th>
                    <th scope="col">公告发表时间</th>
                    <th scope="col">编辑</th>
                    <th scope="col">删除</th>
                </tr>
                </thead>
                <tbody>
                {% for item in list2 %}
                    <tr>
                        <td>{{ item.announce_type }}</td>
                        <td>{{ item.announce_head }}</td>
                        <td>{{ item.publisher }}</td>
                        <td>{{ item.upload_time }}</td>
                        <td><a href="{{ url_for('jymng.announceEdit', sys_id=item.id) }}">编辑</a></td>
                        <td><a href="{{ url_for('jymng.announceDelete', sys_id=item.id) }}">删除</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}

        {% if list3|length > 0 %}
            <hr>
            <p>内外公告</p>
            <table class="table table-striped table-hover table-bordered">
                <thead>
                <tr>
                    <th scope="col">公告类型</th>
                    <th scope="col">公告名称</th>
                    <th scope="col">公告发表人</th>
                    <th scope="col">公告发表时间</th>
                    <th scope="col">编辑</th>
                    <th scope="col">删除</th>
                </tr>
                </thead>
                <tbody>
                {% for item in list3 %}
                    <tr>
                        <td>{{ item.announce_type }}</td>
                        <td>{{ item.announce_head }}</td>
                        <td>{{ item.publisher }}</td>
                        <td>{{ item.upload_time }}</td>
                        <td><a href="{{ url_for('jymng.announceEdit', sys_id=item.id) }}">编辑</a></td>
                        <td><a href="{{ url_for('jymng.announceDelete', sys_id=item.id) }}">删除</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}
    </div>

{% endblock %}